<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>HVL: Dat152</title>
		<meta name="description" content="Page for dat152 presentations">
		<meta name="author" content="Lasse Jenssen">

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">
		<link rel="stylesheet" href="dist/theme/robot-lung.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/zenburn.css">
	</head>
	<body>
			<div class="reveal">
			<div class="slides">

				<section data-background="black">
					<p style="color: #cb4b16; font-size: 50px; margin-top: 0px"><b>WebServices: The Spring Framework</b></p>
					<p style="font-style: italic">Created by <a href="http://www.jcon.no/blog">Lasse Jenssen</a></p>
					<p style="font-size: 18px"><a href="index.html">Home</a></p>
				</section>
				<!-- --------------------------------------------------------
					-- The Spring Framework - Introduction
					------------------------------------------------------------- -->
				<section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>History</b></p>

						<p>2002: Book "Expert One-on-One J2EE Design and Development", Rod Johnsen</p>
						<p>2003: 0.9 version of the Fremwork released</p>
						<p>2004 March: First production release (1.0)</p>
						<p>Latest version (Per 5th of May 2022): 5.3</p>

					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Introduction</b></p>

						<p>A response to the complexity of the early J2EE specifications.</p>
						<p>A complementary to Java EE.</p>
						<p>Integrates with carefully selected individual specifications from the EE umbrella: Servlet API, WebSocket API, JSON Binding API, JPA etc.</p>
						<p>Very much integrated with Maven (or Gradle).</p>
					</section>
					<section>
						<img src="images/spring-framework-overview.png"/>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<img src="images/spring-logo.png" alt="Spring-logo" width="30%" style="float: right; border: none">
						<p style="font-size: 50px; margin-top: 0px" ><b>Design Philosophy</b></p>

						<p>- Provide choice at every level.</p>
						<p>- Accommodate diverse perspectives.</p>
						<p>- Maintain strong backward compatibility.</p>
						<p>- Care about API design.</p>
						<p>- Set high standards for code quality.</p>
					</section>
				</section>
				<!-- -------------------------------------------------------------
					 -- The Spring Framework - IOC container
					 ------------------------------------------------------------- -->
				<section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>The IoC Container</b></p>

						<ul style="font-size: 24px">
						<li>Responsible to instantiate, configure and assemble the objects.</li>
						<li>Components are called "Beans" (can be any POJOs).</li>
						<li>Two types of IoC Containers: BeanFactory and ApplicationContext</li>
						<li>Tasks:</li>
							<ul style="list-style-type: circle">
								<li>to instantiate the application class.</li>
								<li>to configure the objects.</li>
								<li>to assemble the dependencies between the objects.</li>
							</ul>
						</ul>
					</section>
					<section>
						<pre>
						<code data-trim data-noescape >
							public class App {
							   public static void main( String[] args ) {
							      ApplicationContext context =
							         new ClassPathXmlApplicationContext("spring-config.xml");
							      SequenceGenerator sequence = context.getBean("sequenceGenerator");
							      System.out.println("Next:"+sequence.getNext());
							   }
							}
						</code>
						</pre>
					</section>
					<section>
						<pre>
						<code lang="xml" data-trim data-line-numbers>
							# File: spring-config.xml
							<beans
									xmlns="http://www.springframework.org/schema/beans"
									xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
									xsi:schemaLocation="http://www.springframework.org/schema/beans"
									http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
								...
								<bean name="sequenceGenerator"
									  class="no.hvl.dat152.sequence.FirstSequenceGenerator">
									<property name="prefix" value="30"></property>
									<property name="suffix" value="A"></property>
									<property name="initial" value="1000"></property>
								</bean>
							</beans>
						</code>
						</pre>
					</section>
					<section>
						<pre>
						<code lang="xml" data-trim data-line-numbers>
							# File: spring-config.xml
							<beans
									xmlns="http://www.springframework.org/schema/beans"
									xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
									xsi:schemaLocation="http://www.springframework.org/schema/beans"
									http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
								...
								<bean name="sequenceGenerator"
									  class="no.hvl.dat152.sequence.FirstSequenceGenerator">
									<constructor-arg value="30"></constructor-arg>
									<constructor-arg value="A"></constructor-arg>
									<constructor-arg value="1000"></constructor-arg>
								</bean>
							</beans>
						</code>
						</pre>
					</section>
				</section>
				<!-- -------------------------------------------------------------
					 -- The Spring Framework - Dependency Injection
					 ------------------------------------------------------------- -->
				<section>
					<section>
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Dependency Injection (DI)</b></p>
						<pre>
						<code lang="java" data-trim data-line-numbers style="line-height: 1.4">
							public class DateSequenceGenerator {

							   private PrefixGenerator prefix;
							   private String suffix;
							   private int initial;
							   private int counter;

							   public DateSequenceGenerator() {}

							   public void setPrefix(PrefixGenerator generator) {
								  this.prefix = generator;
							   }
							   ...
							}
						</code>
						</pre>
					</section>
					<section data-transition="fade">
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Dependency Injection</b></p>
						<pre>
							<code lang="xml" data-trim data-line-numbers style="line-height: 1.4">
								…
								<bean id="datePrefixGenerator"
									  class="no.hvl.dat152.prefix.DatePrefixGenerator">
								    <property name="pattern" value="yyyyMMdd"></property>
								</bean>

								<bean name="dateSequenceGenerator"
									  class="no.hvl.dat152.sequence.DateSequenceGenerator">
								    <property name="suffix" value="A"></property>
								    <property name="initial" value="1000"></property>
								    <property name="datePrefixGenerator">
								        <ref bean="datePrefixGenerator"></ref>
								    </property>
								</bean>
							</code>
						</pre>
					</section>
					<section data-transition="fade">
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Dependency Injection: Autowiring</b></p>
						<pre>
							<code lang="xml" data-trim data-line-numbers style="line-height: 1.4">
								…
								<bean id="datePrefixGenerator"
									  class="no.hvl.dat152.prefix.DatePrefixGenerator">
								    <property name="pattern" value="yyyyMMdd"></property>
								</bean>

								<bean name="dateSequenceGenerator"
									  class="no.hvl.dat152.sequence.DateSequenceGenerator">
								    <property name="suffix" value="A"></property>
								    <property name="initial" value="1000"></property>



								</bean>
							</code>
						</pre>
					</section>
					<section>
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Dependency Injection (DI)</b></p>
						<pre>
						<code lang="java" data-trim data-line-numbers style="line-height: 1.4">
							public class DateSequenceGenerator {

							    private PrefixGenerator prefix;
							    private String suffix;
							    private int initial;
							    private int counter;

							    public DateSequenceGenerator() {}

							    @Autowired
							    public DateSequenceGenerator(PrefixGenerator generator) {
							        this.prefix = generator;
							    }
							    ...
							}
						</code>
						</pre>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">The heart of the Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Dependency Injection</b></p>

						<ul style="font-size: 24px">
							<li>Programming technique .</li>
							<ul style="list-style-type: circle">
								<li>Making a class independent of its dependencies.</li>
							</ul>
							<li>By decoupling the usage of an object from its creation.</li>
							<li>Dependent of 4 roles:</li>
							<ul style="list-style-type: circle">
								<li>The service/instance you want to use.</li>
								<li>The client that uses the service/instance.</li>
								<li>An interface that’s used by the client and implemented by the service.</li>
								<li>The injector which creates a service instance and injects it into the client.</li>
							</ul>
						</ul>
					</section>
					<section>
						<p style="font-style: italic; margin-bottom: 0px">The Spring Framework</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Dependency Injection (DI)</b></p>
						<pre>
						<code lang="java" data-trim data-line-numbers style="line-height: 1.4">
							public class DateSequenceGenerator {			# <= Client

							    private PrefixGenerator prefix;				# <= Interface
							    private String suffix;
							    private int initial;
							    private int counter;

							    public DateSequenceGenerator() {}

							    @Autowired									# <= Injector (one way to inject)
							    public DateSequenceGenerator(PrefixGenerator generator) {
							        this.prefix = generator;
							    }
							    ...
							}

							public class DatePrefixGenerator {				# <= Service/Instance
							}
						</code>
						</pre>
					</section>
					<section>
						<p style="font-style: italic; margin-bottom: 0px">Other ways to initialize beans</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Configuration Code (Java)</b></p>
						<pre>
						<code lang="java" data-trim data-line-numbers style="line-height: 1.4">
							@Configuration
							@ComponentScan("no.hvl.dat152")
							public class GeneratorConfig {
							   @Bean
							   public PrefixGenerator() {
								  return new DatePrefixGenarator("yyyyMMdd");
							   }
							}
						</code>
						</pre>
					</section>
					<section>
						<p style="font-style: italic; margin-bottom: 0px">Sources</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Dependency Injection</b></p>
						<span style="font-size: 26px">
						<p><a href="https://www.programmergirl.com/spring-dependency-injection/">https://www.programmergirl.com/spring-dependency-injection/</a></p>
						<p><a href="https://www.baeldung.com/constructor-injection-in-spring">https://www.baeldung.com/constructor-injection-in-spring</a></p>
						<p>Spring in Action, Second Edition, Craig Walls</p>
						</span>
					</section>
				</section>
				<section>
					<span style="font-size: 50px">
						<a href="http://spring.io/projects">http://spring.io/projects</a>
					</span>
				</section>
				<!-- -------------------------------------------------------------
					 -- Spring Boot
					 ------------------------------------------------------------- -->
				<section>
					<section data-background="black">
						<p style="color: #cb4b16; font-size: 50px; margin-bottom: 0px"><b>WebServices: Spring Boot</b></p>
						<p style="color: #cb4b16; font-size: 26px; margin-top: 0px; font-style: italic">An easier approach to the Spring Framework</p>
						<p style="font-style: italic">Created by <a href="http://www.jcon.no/blog">Lasse Jenssen</a></p>
					</section>
				</section>
				<section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">An introduction to</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Spring Boot</b></p>
						<span style="font-size: 26px">
						<ul>
							<li>Spring Boot is built on the top of the Spring framework (an extension).</li>
							<li>Features:</li>
							<ul style="list-style-type: circle">
								<li>Standalone (Embedded server: No need for a Tomcat Web Server).</li>
								<li>Opinionated (Prebuild configuration of dependencies).</li>
								<li>Autoconfiguration.</li>
							</ul>
						</ul>
						</span>
					</section>
					<section style="text-align: left;">
						<p>Provides a number of starter dependencies for different Spring modules.</p>
						<span style="font-size: 26px">
						<ul>
							<li>spring-boot-starter-web</li>
							<li>spring-boot-starter-data-jpa</li>
							<li>spring-boot-starter-security</li>
							<li>spring-boot-starter-test</li>
						</ul>
						</span>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Maven Dependencies</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>The parent dependency</b></p>
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4">
								<parent>
								    <groupId>org.springframework.boot</groupId>
								    <artifactId>spring-boot-starter-parent</artifactId>
								    <version>2.7.0</version>
								    <relativePath></relativePath>  <!-- lookup parent from repository -->
								</parent>
							</code>
						</pre>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Maven Dependencies</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Starter Dependencies</b></p>
						<pre>
							<code lang="xml" data-trim data-line-numbers style="line-height: 1.4">
								<dependency>
								    <groupId>org.springframework.boot</groupId>
								    <artifactId>spring-boot-starter-web</artifactId>
								    <version>2.4.4</version>
								</dependency>
							</code>
						</pre>
					</section>
					<section>
						<img class="stretch" src="images/spring-parent-relative-path.png" alt="Spring-maven-relative-path" style="border: none;">
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Maven Dependencies</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Parent RelativePath</b></p>

						<pre>
							<code lang="xml" data-trim data-line-numbers style="line-height: 1.4;">
								<parent>
								    <groupId>com.example.demo</groupId>
								    <artifactId>AppP</artifactId>
								    <version>1.0.0</version>
								    <relativePath>../AppP</relativePath>
								</parent>
							</code>
						</pre>
					</section>
				</section>
				<!-- -------------------------------------------------------------
					 -- Spring Initializer
					 ------------------------------------------------------------- -->
				<section>
					<section>
					<span style="font-size: 50px">
						<p style="font-style: italic"><b>Spring Initializer</b></p>
						<a href="http://start.spring.io">http://start.spring.io</a>
					</span>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Spring Initializer</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Command Line w/Curl</b></p>

						<pre>
							<code lang="shell" data-trim data-line-numbers style="line-height: 1.4;">
								curl -G https://start.spring.io/starter.tgz \
								   -d javaVersion=8 \
								   -d dependencies=web,jpa \
								   -d name=SpringBootDemo \
								   -d groupId=org.example.springbootdemo \
								   -d artifactId=SpringBootDemo \
								   -d packageName=org.example.springbootdemo \
								   -o myfile.tar.gz
							</code>
						</pre>
					</section>
					<!-- -------------------------------------------------------------
					 -- Demo: Simple WebService
					 ------------------------------------------------------------- -->
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Spring Boot & REST WebService</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Demo</b></p>
						<span style="font-size: 26px">
							<p>1. Starting WebService without RestController</p>
							<p>2. Creating a simple rest controller (hello)</p>
							<p>3. Calling rest web service : </p>
							<p style="font-family: Courier New, monospace;">curl –G http://localhost:8080/hello?name=Bill</p>
						</span>
					</section>
					<section style="text-align: left;">
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4;">
								package com.example.demo;

								import org.springframework.web.bind.annotation.RequestMapping;
								import org.springframework.web.bind.annotation.RestController;

								@RestController
								public class HelloController {
									@RequestMapping("/hello")
									public String hello(String name) {
										return "Hello to " + name;
									}
								}
							</code>
						</pre>
					</section>
					<section>
						<img class="stretch" src="images/spring-boot-maven-run.png" alt="Spring-boot-maven-run" style="border: none;">
					</section>
				</section>
				<!-- -------------------------------------------------------------
					 -- Demo: Simple WebService
					 ------------------------------------------------------------- -->
				<section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">MediaType.APPLICATION_JSON_VALUE</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Demo</b></p>
						<span style="font-size: 26px">
							<p>1. Introducing a Greeting class w/Counter and Greeting content.</p>
							<p>2. Create new WebService "Greeting" configured to return Json.</p>
							<p>3. Calling rest web service : </p>
							<p style="font-family: Courier New, monospace;">curl –G http://localhost:8080/greeting?name=Bill</p>
						</span>
					</section>
					<section>
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4;">
								package com.example.demo;

								public class Greeting {
									private final long id;
									private final String content;

									public Greeting(long id, String content) {
										this.id = id;
										this.content = content;
									}

									public long getId() {
										return id;
									}

									public String getContent() {
										return content;
									}
								}
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4;">
								private static final String template = "Hello, %s!";
								private final AtomicLong counter = new AtomicLong();

								@RequestMapping(value = "/greeting", produces = MediaType.APPLICATION_JSON_VALUE)
								public Greeting greeting(@RequestParam(value = "name", defaultValue = "World") String name) {
								   return
								      new Greeting(counter.incrementAndGet(), String.format(template, name));
								}
							</code>
						</pre>
					</section>
				</section>
				<!-- -------------------------------------------------------------
					 -- Demo: Embedded Server vs External Server
					 ------------------------------------------------------------- -->
				<section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Spring Boot & Spring Web</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>External vs Embedded Server</b></p>
					</section>
					<section>
						<p style="font-style: italic; margin-bottom: 0px">In the beginning</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>External Web Servers</b></p>
						<pre>
							<code lang="shell">
								$ pwd
								/Users/lassejenssen/apps/apache-tomcat-9.0.64
								$ tree -d -L 2
								.
								├── bin
								├── conf
								├── lib
								├── logs
								├── temp
								├── webapps
								│   ├── ROOT
								│   ├── docs
								│   ├── examples
								│   ├── host-manager
								│   └── manager
								└── work
							</code>
						</pre>
					</section>
					<section>
						<img class="stretch" src="images/tomcat-server.png" alt="Tomcat Server" style="border: none;">
					</section>
					<section>
						<img class="stretch" src="images/tomcat-server-deploy.png" alt="Tomcat Server Deploy" style="border: none;">
					</section>
					<section>
						<img class="stretch" src="images/eclipse-run-on-server-tomcat.png" alt="Eclipse Run On Server" style="border: none;">
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">External Web Servers</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Pros</b></p>
						<span style="font-size: 26px">
						<ul>
							<li>Potentially more flexible application architecture.</li>
							<li>Really easy to switch servers later.</li>
							<li>Application errors can’t harm the server.</li>
							<li>Easy to deploy app updates without restarting the server.</li>
							<li>Performance and correctness: servers like nginx are highly optimized and tested for complete HTTP correctness, which your app then gets for free.</li>
						</ul>
						</span>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">External Web Servers</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Cons</b></p>
						<span style="font-size: 26px">
						<ul>
							<li>Extra performance overhead: there could be anything from an extra layer of method abstraction up to CGI-level overhead for your app and the server to communicate.</li>
							<li>Deployment complexity: you have to maintain the web server and the application, deploy them individually, ad hoc version testing, etc.</li>
							<li>Trickier development environment.</li>
						</ul>
						</span>
					</section>
					<section>
						<p style="font-style: italic; margin-bottom: 0px">Spring Boot Default</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Embedded Web Server</b></p>
						<pre>
							<code lang="shell" data-trim data-line-numbers style="line-height: 1.4;">
								# mvn spring-boot:run
							</code>
							<p></p>
							<code lang="shell" data-trim data-line-numbers style="line-height: 1.4;">
								# mvn package
								# java -cp target/demo-01-several-controllers-0.0.1-SNAPSHOT.jar no.hvl.dat152.Demo01JettyWebApp
							</code>
						</pre>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Embedded Web Servers</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Pros</b></p>
						<span style="font-size: 26px">
						<ul>
							<li>More self-contained applications. This helps a lot during development.</li>
							<li>As a dependency of your application, you can test against server versions just like any other dependency.</li>
							<li>More control over how the web server behaves (custom filters, headers, caching).</li>
							<li>Single object to be deployed.</li>
							<li>Easy to integrate with Docker, Kubernetes, OpenShift etc.</li>
						</ul>
						</span>
					</section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Embedded Web Servers</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Cons</b></p>
						<span style="font-size: 24px">
						<ul>
							<li>Your application has to be designed around the API of whatever server you are using, making it harder to change servers later. <br><small>(Java doesn’t really have this problem, as you can still use the servlet API when embedding)</small></li>
							<li>Dependency bloat, as you have to include all the dependencies of the web server.</li>
							<li>More effort to deploy hotfixes to security exploits in the server.</li>
							<li>You can’t group multiple applications behind one server without a proxy.<br><small>(Not really an issue if deploying to virtual platform)</small></li>
							<li>A single uncaught exception is enough to take down the entire application server.</li>
						</ul>
						</span>
					</section>
				</section>
				<!-- -------------------------------------------------------------
					 -- Demo: Testing WebServices
					 ------------------------------------------------------------- -->
				<section>
					<section style="text-align: left;">
						<p style="font-style: italic; margin-bottom: 0px">Unit Testing WebServices</p>
						<p style="font-size: 50px; margin-top: 0px" ><b>Demo</b></p>
						<span style="font-size: 26px">
							<p>Extend the DemoApplicationTests class ... </p>
							<p>1. Create a test for failing web service ("morning" - not existing).</p>
							<p>2. Create a test for sucessfull web service call ("greeting").</p>
							<p>3. Create a test checking content type is Json.</p>
							<p>4. Create a test checking increasing counter.</p>
						</span>
					</section>
					<section>
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4;">
package com.example.demo;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.web.client.TestRestTemplate;

@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class DemoApplicationTests {
	@Autowired
	private TestRestTemplate template;

	@Test
	void contextLoads() {
	}
}
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4;">
package com.example.demo;

import ...
import org.junit.jupiter.api.Test;
import org.springframework.http.ResponseEntity;
import static org.assertj.core.api.Assertions.assertThat;

@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class DemoApplicationTests {
	@Autowired
	private TestRestTemplate template;

    ...

	@Test
	public void checkWrongGreeting() throws Exception {
		ResponseEntity< Greeting > response = template.getForEntity("/morning", Greeting.class);
		assertThat(response.getStatusCode().isError()).isTrue();
	}

}
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4;">
package com.example.demo;

import ...
import org.junit.jupiter.api.Test;
import org.springframework.http.ResponseEntity;
import static org.assertj.core.api.Assertions.assertThat;

@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class DemoApplicationTests {
	@Autowired
	private TestRestTemplate template;

	@Test
	public void checkOkGreeting() throws Exception {
		String name = "bill";
		ResponseEntity< Greeting > response = template.getForEntity("/greeting?name=" + name, Greeting.class);

		assertThat(response.getStatusCode().is2xxSuccessful()).isTrue();
		assertThat(response.getBody().getContent().equals(String.format("Hello, %s", name)));
	}
}
							</code>
						</pre>
					</section>
					<section>
						<pre>
							<code lang="java" data-trim data-line-numbers style="line-height: 1.4;">
package com.example.demo;

import ...
import org.junit.jupiter.api.Test;
import org.springframework.http.ResponseEntity;
import static org.assertj.core.api.Assertions.assertThat;

@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class DemoApplicationTests {
	@Autowired
	private TestRestTemplate template;

	@Test
	public void checkContentTypeJSON() throws Exception {
	   String expectedType = MediaType.APPLICATION_JSON_VALUE;
	   ResponseEntity< Greeting > response = template.getForEntity("/greeting", Greeting.class);
	   assertThat(expectedType).isEqualTo(response.getHeaders().getContentType().toString());
	}
}
							</code>
						</pre>
					</section>
				</section>
				<!-- --------------------------------------------------------
					-- Next
					------------------------------------------------------------- -->
				<section data-background="black">
					<p style="font-style: italic; margin-bottom: 0px">Next</p>
					<p style="font-size: 50px; margin-top: 0px" ><a href="ws-03-rest-store.html"><b>Building a RESTFull Store WebService</b></a></p>
					<p style="font-size: 18px"><a href="index.html">Home</a></p>
				</section>

			</div>
	  </div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,
				transition: 'fade',

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
